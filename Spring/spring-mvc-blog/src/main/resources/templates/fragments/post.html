<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

<div th:fragment="post-thumbnail (post)" class="border rounded-1 bg-white p-2">
    <a th:href="'post/' + ${post.id}"
       class="text-decoration-none text-black">
        <h3 class="mt-1" th:text="${post.title}">Post Title</h3>
        <h6 class="d-flex">
            <span class="me-auto" th:text="#{post.author} + ': ' + ${post.blogUser.userName}">Author user name</span>
            <span class="me-2" th:text="#{post.postedOn} + ': ' + ${post.createdOn}">Posted on</span>
            <span th:text="#{post.editedOn} + ': ' + ${post.updatedOn}">Edited on</span>
        </h6>
        <hr>
        <p th:text="${post.content.substring(0, 200)} + ' . . .'">Post Content</p>
    </a>
</div>

<div th:fragment="post-full (post)" class="border rounded-1 bg-white p-2">
    <h4 class="mt-1" th:text="${post.title}">Post Title</h4>
    <h6 class="d-flex">
        <span class="me-auto" th:text="#{post.author} + ': ' + ${post.blogUser.userName}">Author user name</span>
        <span class="me-2" th:text="#{post.postedOn} + ': ' + ${post.createdOn}">Posted on</span>
        <span th:text="#{post.editedOn} + ': ' + ${post.updatedOn}">Edited on</span>
    </h6>
    <hr>
    <form>
        <textarea class="form-control bg-white" style="overflow:hidden"
                  th:text="${post.content}">Post Content</textarea>
        <div class="d-flex justify-content-end mt-2"
             th:if="(${#authentication.getName()} == ${post.blogUser.userName}) or ${#authentication.getName().equals('admin')}"
             sec:authorize="isAuthenticated()">
            <button class="btn btn-outline-primary me-2">Edit</button>
            <button class="btn btn-outline-success me-2 disabled">Save</button>
            <button class="btn btn-outline-danger">Delete</button>
        </div>
    </form>
</div>

<div th:fragment="post-comment (comment)" class="border rounded-1 bg-white p-2">
    <h6 class="d-flex">
        <span class="me-auto" th:text="#{post.author} + ': ' + ${comment.blogUser.userName}">Comment author user name</span>
        <span class="me-2" th:text="#{post.commentedOn} + ': ' + ${comment.createdOn}">Commented on</span>
    </h6>
    <hr>
    <form>
        <textarea class="form-control bg-white" style="overflow:hidden"
                  th:text="${comment.comment}">Comment</textarea>
        <div class="d-flex justify-content-end mt-2"
             th:if="(${#authentication.getName()} == ${comment.blogUser.userName}) or ${#authentication.getName().equals('admin')}"
             sec:authorize="isAuthenticated()">
            <button class="btn btn-outline-primary me-2">Edit</button>
            <button class="btn btn-outline-success me-2 disabled">Save</button>
            <button class="btn btn-outline-danger">Delete</button>
        </div>
    </form>
</div>

<div th:fragment="new-post-comment (post)">
    <h5 class="mt-2">Comments</h5>

    <div class="row row-cols-1" sec:authorize="isAuthenticated()">
        <div class="border rounded-1 bg-white p-2">
            <form method="post">
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here"
                              style="overflow:hidden"
                              id="floatingTextarea"></textarea>
                    <label for="floatingTextarea">Add new comment</label>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-outline-primary mt-2">Add New Comment</button>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>
