<!DOCTYPE html>
<!--<html lang="en">-->
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--    <link rel="stylesheet" href="css/bootstrap.css">-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="/script/language.js"></script>
    <title>Product list</title>
</head>
<body>
<select id="LanguageSelector">
    <!--    th:href="@{/products/list?lang=lt}-->
    <!--    th:href="@{/products/list?lang=en}-->
    <option value="" th:text="#{lang.option}"></option>
    <option value="LT" th:text="Lietuviu"></option>
    <option value="EN" th:text="English"></option>
</select>
<div class="container mt-3">
    <div th:if="${products.isEmpty}">
        <!--    <div th:if="${#lists.isEmpty(products)}">-->
        <h3>Product list is empty</h3>
    </div>
    <div class="row" th:unless="${products.isEmpty}">
        <h1>Products</h1>
        <div class="row">
            <p th:text="'Total elements: ' + ${products.totalElements}"></p>
            <p th:text="'Total pages: ' + ${products.totalPages}"></p>
        </div>
        <table class="table table-striped table-hover table-bordered">
            <thead>
            <tr>
                <th>
                    <a
                            th:with="direction=${products.sort.getOrderFor('name')?.direction}"
                            th:href="@{/products/list(page=${products.getNumber()}, sort='name,' + ${direction?.isAscending() ? 'DESC' : 'ASC'} + ',ignorecase')}">Name
                        <i class="fa-solid"
                           th:classappend="${direction?.isAscending() ? 'fa-arrow-down-a-z' : 'fa-arrow-up-z-a'}"></i>
                    </a>
                </th>
                <th><a th:href="@{/product/list(sort='quantity,ASC')}">Quantity</a>
                    <i class="fa-solid fa-arrow-down-1-9"></i>
                </th>
                <th>Price
                    <i class="fa-solid fa-arrow-down-1-9"></i>
                </th>
                <th>Description
                    <i class="fa-solid fa-arrow-down-a-z"></i>
                </th>
                <th>Action
                </th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product: ${products}">
                <td><a th:href="@{'/products/update?id=' + ${product.uuid}}" th:text="${product.name}"></a></td>
                <!--                <td><a th:href="@{'/products/{uuid}/update?id=' + ${product.uuid}}" th:text="${product.name}"></a></td>-->
                <!--                <td th:text="${product.uuid}"></td>-->
                <td th:text="${product.quantity}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.description}"></td>
                <td>
                    <!--                    th:href="@{/employees/delete(employeeId=${employee.id})}"-->
                    <a class="btn btn-warning" th:href="@{/products/delete(id=${product.uuid})}">DELETE</a>
                </td>
            </tr>
            </tbody>
            <!--            <div class="container">-->
            <!--                <h1>Test</h1>-->
            <!--            </div>-->

        </table>

        <div class="d-flex justify-content-center">
            <nav>
                <ul class="pagination">
                    <li class="page-item"
                        th:classappend="${!products.hasPrevious()} ? 'disabled'">
                        <a class="page-link" href="#"
                           th:href="@{/products/list(page=${products.previousOrFirstPageable().getPageNumber()})}">Previous</a>
                    </li>
                    <li class="page-item"
                        th:each="index: ${#numbers.sequence(0, products.totalPages - 1)}"
                        th:classappend="${index == products.number ? 'active' : ''}">
                        <a class="page-link" href="#" th:text="${index + 1}"
                           th:href="@{/products/list(page=${index})}"></a>
                    </li>
                    <!--            <li class="page-item"><a class="page-link" href="#">1</a></li>-->
                    <!--            <li class="page-item"><a class="page-link" href="#">2</a></li>-->
                    <!--            <li class="page-item"><a class="page-link" href="#">3</a></li>-->
                    <li class="page-item"
                        th:classappend="${!products.hasNext()} ? 'disabled'">
                        <a class="page-link" href="#"
                           th:href="@{/products/list(page=${products.nextOrLastPageable().getPageNumber()})}">Next</a></li>
                </ul>
            </nav>
        </div>
        <div class="row">
            <p th:text="'Total elements: ' + ${products.totalElements}"></p>
            <p th:text="'Total pages: ' + ${products.totalPages}"></p>
        </div>
    </div>

</div>

</body>
</html>
